<!DOCTYPE html>
<html>
<head lang="en">
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link rel="shortcut icon" href="{{STATIC_URL}}images/favicon.ico"/>
    <script src="{{STATIC_URL}}js/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}js/jquery-ui.js" type="text/javascript"></script>

	<link rel="stylesheet" href="{{STATIC_URL}}css/bootstrap.css" type="text/css" media="all" />
    <link rel="stylesheet" href="{{STATIC_URL}}css/style.css" type="text/css" media="all" />
    <link rel="stylesheet" href="{{STATIC_URL}}css/ui.jqgrid.css" type="text/css" media="all" />

     <!-- ###########################jqueryUI####################################   -->
    <link rel="stylesheet" href="{{STATIC_URL}}css/jquery-ui.css" type="text/css" media="all" />
    <link rel="stylesheet" href="{{STATIC_URL}}css/jquery-ui.structure.css" type="text/css" media="all" />
    <link rel="stylesheet" href="{{STATIC_URL}}css/jquery-ui.theme.css" type="text/css" media="all" />




    <!-- ###########################jqGrid####################################   -->
    <script src="{{STATIC_URL}}js/i18n/grid.locale-es.js" type="text/javascript"></script>
    <script src="{{STATIC_URL}}js/jquery.jqGrid.min.js" type="text/javascript"></script>


    <!--#################################Estilos para Menú#################################-->

    <link href="{{STATIC_URL}}css/menu/dropdown.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="{{STATIC_URL}}css/menu/default.css" media="screen" rel="stylesheet" type="text/css" />



    <title id="mensajeParaImprimir">SiRePa  </title>

</head>
<body>
    <style type="text/css">
            .container{
                margin-left:0px;
                padding-left:0px;
            }


            .ui-jqgrid .ui-jqgrid-titlebar {
                font-size: 16px;
                padding: 0.1em 0.1em 0.1em 2em;
            }
        </style>



    <div class="wrapper" style="padding-top: 1em;">
        <div  class="page-header">

{#        comentario para probar#}
            <!-- Logo -->
            <div id="logo">
                <img src="{{STATIC_URL}}images/header.png">
            </div>

            <!-- Navigation -->
            {% block menu %}
                {% if user.username != '' %}
                    <ul id="menu" class="dropdown dropdown-horizontal">
                        <li><a href="/">Inicio</a></li>

                        <li><a href="/menuReportesEstadisticos/" class="dir">Reportes Estad&iacute;sticos</a>
                            <ul class="subIndice">
                                <li><a href="/reportesFormasDePago/">Reportes seg&uacute;n Formas de Pago</a></li>
                                <li><a href="/ventasMensuales">Reportes de Ventas Mensuales</a>
                                    <ul style="margin-left:8px; margin-top:-0.6%;" class="subIndice">
                                        <li><a style="width: 320px;" href="/detalleCmsVendidosyCedidos/">Detalles de Cent&iacute;metros Vendidos y/o Cedidos</a></li>


                                        <li><a style="width: 320px;" href="/detalleRecargosyDescuentos">Detalle de Recargos y Descuentos</a></li>

                                    </ul>

                                </li>
                                <li><a href="/formVentaNetaAnual">Ventas Netas Anuales de Publicidad</a></li>
                            </ul>
                        </li>
                        <li><a href="/promociones/formPromociones" class="dir">Reportes de Promociones/Convenios</a>
                            <ul id="Mpromociones" class="subIndice">
                                <li><a href="/grupoPromocion/0">Todas las Promociones</a></li>
                                <li><a href="/grupoPromocion/1">2 publicaciones = 1 sin cargo</a></li>
                                <li><a href="/grupoPromocion/2">3 publicaciones = 1 sin cargo</a></li>
                                <li><a href="/grupoPromocion/3">3 publicaciones = 1 sin cargo [2x2]</a></li>
                                <li><a href="/grupoPromocion/4">4 o más días = 50% Descuento</a></li>
                                <li><a href="/grupoPromocion/5">5 publicaciones = 1 sin cargo</a></li>
                                <li><a href="/grupoPromocion/6">7 publicaciones = 3 sin cargo</a></li>
                                <li><a href="/grupoPromocion/7">Agencias Publican 3 = 1 sin cargo</a></li>
                                <li><a href="/grupoPromocion/8">Promo Agencia y Cliente</a></li>
                                <li><a href="/grupoPromocion/9">C&aacute;mara de Automotores</a></li>
                                <li><a href="/grupoPromocion/A">C&aacute;mara Inmobiliaria</a></li>
                                <li><a href="/grupoPromocion/B">Sin Promoci&oacute;n</a></li>
                                <li><a href="/grupoPromocion/D">Convenios</a></li>

                            </ul>



                        </li>
                        <li><a href="/ventasDiayHora/formVentasCaptura" class="dir">Ventas por Día y Hora</a>
                            <ul class="subIndice">
                                <li><a href="/ventasDiayHora/capturaDiayHora/0">Ventas por Dia</a></li>

                                <li><a href="/ventasDiayHora/capturaDiayHora/1">Ventas por Hora</a></li>

                            </ul>

                        </li>
                        <li><a href="javascript:void(0)" class="dir">Consumos de Papel</a></li>
                        <li><a href="/reportesVendedor/formVentasVendedor" class="dir">Avisos por Vendedor</a>
                            <ul class="subIndice">
                                <li><a href="/reportesVendedor/ventasVendedorPorHora">Ventas de Vendedor por Hora</a></li>

                                <li><a href="/reportesVendedor/ventasVendedorPorFormaPago">Ventas de Vendedor por Forma de Pago</a></li>

                            </ul>

                        </li>
                    </ul>
                {% endif %}
            {% endblock %}




            <!--End Navigation -->

            <div id="loginOut" class="navbar-default">
                {% if user.username != '' %}
                    <ul>
                      <li><span>Usuario: <em>{{ user.username }}</em></span></li>

                      <li><a href="/salir">Cerrar Sesi&oacute;n</a></li>
                    </ul>
                {% endif %}


            </div>


        </div>
        <!-- End Header -->


{% block exportacion %}


   <div id="exportacion">


       <a href="javascript:void(0)" title="Imprimir Reporte" onclick="printPage()"><img src="{{STATIC_URL}}images/Print-icon.png"></a>

      <!--<a href="/exportarAPdf" title="Ver Reporte en PDF" target="_blank"><img src="{{STATIC_URL}}images/pdf-ico.png"></a>-->

       <a href="/exportarAXls" title="Descargar Reporte en Excel" target="_blank" ><img src="{{STATIC_URL}}images/microsoft-excel.png"></a>

   </div>

 {% endblock %}

       <div class="container">

            {%block contenido  %} {% endblock %}


       </div>

        <div id= 'panel-footer' >
            <div class="center">

                <strong>Sistema de Reportes de Pasantes (SiRePa)</strong>
            </div>

        </div>
    </div>

<script type="text/javascript">
//Funcion que elimina los espacios en blanco de la cadena ingresada
function trim(cadena){
       cadena=cadena.replace(/^\s+/,'').replace(/\s+$/,'');
       return(cadena);
}

   function printPage(){
       var mostrarBotonGuardarTotal = false;
       var mostrarCuadrilla = false;
       var mostrarBotanAgregarAnio = false;
       var mostrarMenu = false;
       var gruopingContent = false;

       document.getElementById('exportacion').style.display = "none";
       document.getElementById('panel-footer').style.display = "none";
       document.getElementById('navegacion').style.display = "none";
       document.getElementById('loginOut').style.display = "none";

        if ($('#guardarTotal').is(':visible')){
            document.getElementById('guardarTotal').style.display = "none";
            mostrarBotonGuardarTotal = true;
        }

       if ($('#mensajeGuardado').is(':visible')){
            $('#mensajeGuardado').style.display = "none";

       }

       if ($('#menu').is(':visible')){
            $('#menu').hide();
            mostrarMenu = true;
       }

       if ($('.gruopingContent').is(':visible')){
            $('.gruopingContent').hide();
            gruopingContent = true;
       }

       if ($('#botonanios').is(':visible')){
            $('#botonanios').hide();
            mostrarBotanAgregarAnio = true;

       }
       if ($('#cuadrilla').is(':visible')){
            $('#cuadrilla').hide();
            mostrarCuadrilla = true;
       }



       var fecha = new Date();
       var minutos = fecha.getMinutes();
       if (minutos <10) {
        minutos = '0'+minutos;
       }

       var hora = fecha.getHours()+':'+minutos;
       $('#mensajeParaImprimir').html('Informe Producido en SiRePa por el Usuario:  {{user.username}} - Impreso a las: '+hora);
       //Whatever other elements to hide.
       $(window).resize();

       $(window).focus();

       window.print();

       document.getElementById('loginOut').style.display = "block";
        document.getElementById('exportacion').style.display = "block";
       document.getElementById('panel-footer').style.display = "block";
       document.getElementById('navegacion').style.display = "block";

        $('#mensajeParaImprimir').html('SiRePa');
        if (mostrarBotonGuardarTotal){
            $('#guardarTotal').show();
        }
        if (mostrarCuadrilla){
            $('#cuadrilla').show();
        }

        if (mostrarBotanAgregarAnio){
            $('#botonanios').show();
        }

        if (mostrarMenu){
            $('#menu').show();
        }

        if (gruopingContent){
            $('.gruopingContent').show();
        }


       return true;
   }
function progreso(){

    $('#formulario').hide();
    $('#barraProgreso').show();
    $('#cargando').show();

    $( "#progressbar" ).progressbar({
         value: false
    });
    $( "button" ).on( "click", function( event ) {
           var target = $( event.target ),
           progressbar = $( "#progressbar" ),
           progressbarValue = progressbar.find( ".ui-progressbar-value" );

        if ( target.is( "#numButton" ) ) {
            progressbar.progressbar( "option", {
              value: Math.floor( Math.random() * 100 )
            });
        }else if ( target.is( "#colorButton" ) ) {
            progressbarValue.css({
              "background": '#' + Math.floor( Math.random() * 16777215 ).toString( 16 )
            });
        }else if ( target.is( "#falseButton" ) ) {
            progressbar.progressbar( "option", "value", false );
        }
    });

}

//---------Esto es para que el usuario no toque alguna de las funciones F o las funciones CTRL-----------------------------------
document.onkeydown = function(event){
    event = event || window.event
     var x = event.keyCode;
   if (((x == 70)||(x == 78)||(x == 79)||(x == 80)) && (event.ctrlKey) || (x > 116 && x<124) ){

      event.cancelBubble = true;
      event.returnValue = false;
      event.keyCode = false;
      alert('Esta acción está prohibida');
      return false;
  }
}

// metodo para cargar los detalles de cada aviso del jqgrid, se setea en cada template en particular
var listaauxiliar = []; var codigoAvisoAuxiliar = '';
function mostrarDetalleFila(event,a){

    console.log('esto es a '+ a);

        for (i=0 ; i < listaauxiliar.length; i++){
            if (listaauxiliar[i]['CodigoAviso'] == a){
                console.log(a);
                //'fechafactura', 'nrofactura', 'nropedido', 'CodigoAviso', 'OrdenPublicidad'
                if ((listaauxiliar[i]['fechafactura'] != 0) && (listaauxiliar[i]['fechafactura'] != null) && (listaauxiliar[i]['fechafactura'] != '')){

                    $("#fechaFactura").html(listaauxiliar[i]['fechafactura']);
                    console.log(listaauxiliar[i]['fechafactura']);
                }else{
                    $("#fechaFactura").html('-');
                }
                if ((listaauxiliar[i]['nrofactura'] != 0) && (listaauxiliar[i]['nrofactura'] != null) && (listaauxiliar[i]['nrofactura'] != '')){

                    $("#numeroFactura").html(listaauxiliar[i]['nrofactura']);
                    console.log(listaauxiliar[i]['fechafactura']);
                }else{
                    $("#numeroFactura").html('-');
                }

                if ((listaauxiliar[i]['nropedido'] != 0) && (listaauxiliar[i]['nropedido'] != null) && (listaauxiliar[i]['nropedido'] != '')){

                    $("#numeroPedido").html(listaauxiliar[i]['nropedido']);
                }else{
                    $("#numeroPedido").html('-');
                }

                $("#codigoAviso").html(listaauxiliar[i]['CodigoAviso']);

                if ((listaauxiliar[i]['OrdenPublicidad'] != 0) && (listaauxiliar[i]['OrdenPublicidad'] != null) && (listaauxiliar[i]['OrdenPublicidad'] != '')){
                    $("#ordenPublicidad").html(listaauxiliar[i]['OrdenPublicidad']);
                }else{
                    $("#ordenPublicidad").html('-');
                }
            }
        }
    /* comento x ahora para probar el cuadro flotante
        $(".shadow").slideDown();
        $(".enviarCorreo").fadeIn();
    */
    showdiv(event);
}


$(document).ready(function(){
    $(".shadow").click(function(){
        $(".shadow").slideUp();
        $(".enviarCorreo").fadeOut();
        $("#fechaFactura").html('');
        $("#numeroFactura").html('');
        $("#numeroPedido").html('');
        $("#codigoAviso").html('');
        $("#ordenPublicidad").html('');

        $('#contenedorGraficos').hide();

        $("#graficoCompensacion").fadeOut();

        $("#graficoContado").fadeOut();
        $("#graficoCortesias").fadeOut();
        $("#graficoReposicion").fadeOut();
        $("#graficoCuentaCorriente").fadeOut();
        $("#graficoOtrasFormasDePago").fadeOut();

    });


    $('input:text').focus(function() {
        $(this).addClass('resaltarInputs');

    });
    $('input').focusout(function() {
        $(this).removeClass('resaltarInputs');

    });

    $('textarea').focus(function() {
        $(this).addClass('resaltarInputs');

    });
    $('textarea').focusout(function() {
        $(this).removeClass('resaltarInputs');

    });

    $('.x').click(function(){
        $(".shadow").slideUp();

            $(".enviarCorreo").fadeOut();
            $("#fechaFactura").html('');
            $("#numeroFactura").html('');
            $("#numeroPedido").html('');
            $("#codigoAviso").html('');
            $("#ordenPublicidad").html('');

        $('#contenedorGraficos').hide();

        $("#graficoCompensacion").fadeOut();

        $("#graficoContado").fadeOut();
        $("#graficoCortesias").fadeOut();
        $("#graficoReposicion").fadeOut();
        $("#graficoCuentaCorriente").fadeOut();
        $("#graficoOtrasFormasDePago").fadeOut();

         $("#flotante").fadeOut();


    });

});

 $(document).bind('keydown',function(e){
    if ( e.which == 27 ) {
          $(".shadow").slideUp();
            //Esta clase se la creo inicial
            $(".enviarCorreo").fadeOut();
            $("#fechaFactura").html('');
            $("#numeroFactura").html('');
            $("#numeroPedido").html('');
            $("#codigoAviso").html('');
            $("#ordenPublicidad").html('');

            $('#contenedorGraficos').fadeOut();

            $("#graficoCompensacion").fadeOut();

            $("#graficoContado").fadeOut();
            $("#graficoCortesias").fadeOut();
            $("#graficoReposicion").fadeOut();
            $("#graficoCuentaCorriente").fadeOut();
            $("#graficoOtrasFormasDePago").fadeOut();

            $("#flotante").fadeOut();
    }

 });

 ////////////////////////////////////////función para hacer el menú de mas información del jqgrid de cada fila//////////////////
 function showdiv(event)
	{
		//determina un margen de pixels del div al raton
		margin=5;

		//La variable IE determina si estamos utilizando IE
		var IE = document.all?true:false;

		var tempX = 0;
		var tempY = 0;


		//document.body.clientHeight = devuelve la altura del body
		if(IE)
		{
			//document.captureEvents(Event.MOUSEMOVE);
            //document.captureEvents(Event.MOUSEDOWN);

            tempX = event.pageX;
            tempY = event.pageY;

		}else{ //para netscape

			//window.pageYOffset = devuelve el tamaño en pixels de la parte superior no visible (scroll) de la pagina
			document.captureEvents(Event.MOUSEMOVE);
			tempX = event.pageX;
			tempY = event.pageY;
		}

		if (tempX < 0){tempX = 0;}
		if (tempY < 0){tempY = 0;}

		// Modificamos el contenido de la capa
		$(".shadow").slideDown();
		$('#flotante').show();
		//document.getElementById('flotante').innerHTML=text;

		// Posicionamos la capa flotante
		document.getElementById('flotante').style.top = (tempY+margin)+"px";
		document.getElementById('flotante').style.left = (tempX+margin)+"px";
		document.getElementById('flotante').style.display='block';
		return;
	}

	/**
	* Funcion para esconder el div
	*/
	function hiddenDiv()
	{
		document.getElementById('flotante').style.display='none';
	}

 /////////////////////////////////////////////////////////////////////////////



</script>

<div>
    <script type="text/javascript"><!--
        google_ad_client = "pub-5586981122800176";
        //728x90, creado 2/01/08
        google_ad_slot = "6081869238";
        google_ad_width = 728;
        google_ad_height = 90;
    //--></script>
    <script type="text/javascript"
        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
</div>

<div class="shadow"></div>
<div id="flotante" class="enviarCorreo">
    <img class="x" src="{{STATIC_URL}}images/Letter-X-black-icon.png">
        <h4>M&aacute;s Informaci&oacute;n</h4>
       <TABLE id="masInfo">

                <TR style="background-color:#daf2d9;">
                   <TD><label>C&oacute;digo Aviso </label></TD>
                   <TD><label>Fecha Factura </label></TD>
                    <TD><label>Nº Factura</label></TD>
                    <TD><label>Nº Pedido </label></TD>

                    <TD><label>Orden Publicidad </label></TD>

                </TR>
                <TR>
                   <TD><label id="codigoAviso"></label></TD>
                   <TD><label id="fechaFactura"></label></TD>
                    <TD><label id="numeroFactura"></label></TD>
                    <TD><label id="numeroPedido"></label></TD>

                    <TD><label id="ordenPublicidad"></label></TD>

                </TR>

            </TABLE>


</div>


</body>

